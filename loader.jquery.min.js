//
//  loader.jquery.js
//  Loader Plugin Version 1.0
//	Loader Plugin for preloading images and background images
//
//  Created by Robbie Bardijn on 2012-05-22.
//  Copyright 2012 Robbie Bardijn. All rights reserved.
//
(function(e){e.fn.preloadImage=function(t,n,r){r===undefined&&(r=function(){});n===undefined&&(n=function(){});if(t===undefined)throw"ERROR : The completeCallBack should be a function that will be called on loading complete";if(this.children().length===0){n(this);var i=this,s=new Image;s.addEventListener?s.addEventListener("load",function(){t(i);r(i)},!1):s.attachEvent&&s.attachEvent("onload",function(){t(i);r(i)});s.src=this[0].src}else{var o=this.find("img");n(o);var u=0;o.each(function(n){function a(){u+=1;t(i);o.length===u&&r(o)}var i=e(this),s=new Image;s.addEventListener?s.addEventListener("load",a,!1):s.attachEvent&&s.attachEvent("onload",a);s.src=i.context.src})}};e.fn.preloadBackgroundImage=function(t,n,r){r===undefined&&(r=function(){});n===undefined&&(n=function(){});if(t===undefined)throw"ERROR : The completeCallBack should be a function that will be called on loading complete";if(this.children().length===0){n(this);if(this.css("background-image")!=="none"){var i=this,s=new Image;s.addEventListener?s.addEventListener("load",function(){t(i);r(i)},!1):s.attachEvent&&s.attachEvent("onload",function(){t(i);r(i)});var o=load.css("background-image").replace(/(\"|\'|\ )/g,""),u=o.split(",");for(var a=0;a<u.length;a++)s.src=u[a].substring(4,u[a].length-1)}else{t(this);r(this)}}else{var f=this.find("*").filter(function(){var t;e(this).css("background-image")!=="none"?t=!0:t=!1;return t});n(f);var l=0;f.each(function(n){function o(){l+=1;t(i);f.length===l&&r(f)}var i=e(this),s=new Image;s.addEventListener?s.addEventListener("load",o,!1):s.attachEvent&&s.attachEvent("onload",o);var u=i.css("background-image").replace(/(\"|\'|\ )/g,""),a=u.split(",");for(var c=0;c<a.length;c++)s.src=a[c].substring(4,a[c].length-1)})}}})(jQuery);